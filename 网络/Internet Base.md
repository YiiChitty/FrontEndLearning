# 网络

## OSI七层模型

**应用层** ：为应用程序提供服务，并管理应用程序之间的通信（SMTP、HTTP、FTP）  
**表示层** ：处理数据的标识问题，比如编码、格式转化、加密解密等  
**会话层** ：负责建立管理和断开通信连接，实现数据同步  
**传输层** ：端到端传输数据，同时处理传输错误、控制流量等（TCP UDP）  
**网络层** ：地址管理、路由选择（IP协议）  
**数据链路层** ：数据分割成帧，mac寻址、差错校验、信息纠正等。（以太网）  
**物理层** ：利用传输介质为数据链路层提供物理连接  

发送端从应用层 → 物理层 打包发送  
接收层从物理层 → 应用层 解析获取

## DNS解析过程

- **根DNS服务器**：返回顶级域名 DNS 服务器的 IP 地址
- **顶级域DNS服务器**：返回权威域名 DNS 服务器的 IP 地址
- **权威DNS服务器**：返回相应主机的 IP 地址

![img](https://img-blog.csdn.net/20171211190812796?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbTBfMzc4MTI1MTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

以输入www.google.com为例，
1.浏览器检查自身缓存，有无解析此域名对应的ip
2.操作系统缓存hosts文件中查询
3.没有的话，请求本地域名服务器（LDNS）解析域名（一般在城市某处，距离不会太远）
4.如果还没有的话，就去根DNS域服务器查询，此时会给出.com的顶级域名服务器
5.然后去.com服务器查询，此时会给出这个域名google.com的地址，这是网站注册的域名服务器
6.去NameServer查询，根据映射关系表找到目标IP,返回给LDNS（LDNS缓存域名及IP）
7.LDNS解析结果返回用户（缓存到系统缓存中），域名解析结束

## 路由器工作在哪一层

网络层。

路由器是连接因特网中各局域网、广域网的设备，它会根据信道的情况自动选择和设定路由，以最佳路径，先后顺序发送信号。

路由和交换机最主要的区别就是**交换机发生在OSI参考模型第二层（数据链路层）**，而**路由发生在第三层（网络层）**。

这一区别决定了路由和交换机在移动信息的过程中需要使用不同的控制信息，所以两者实现各自功能的方式是不同的。